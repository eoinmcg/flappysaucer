
<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Listing 4 - FlappySaucer</title>
</head>

<body>

<script src="phaser.min.js"></script>
<script>

(function() {

// here we are defining the screen dimensions
// this is the typical size for mobile portrait
var w = 320,
		h = 480,
		background,
		ground,
		player;

// here is where state what graphics
// and sounds should be loaded.
// Phaser does the rest
var preload = function() {

	// loading images is easy
	// 1st param is the name for the image
	// 2nd param is location of the image file
	game.load.image('background', 'assets/bg.png');
	game.load.image('ground', 'assets/ground.png');
	game.load.image('flappy', 'assets/flappy.png');

};


// this function is called once 
// all assets are loaded
var create = function() {

	// add background image, scaled to fit our
	// screen dimensions
	background = game.add.tileSprite(0, 0, w, h, 'background');

	// add graphics for the ground
	ground = game.add.sprite(0, 410, 'ground');

	player = game.add.sprite(game.world.width / 2, game.world.height / 2, 'flappy');
	player.body.gravity.y = 500;

};


// this is our main game loop
// where we check for input, collisions
// etc.
var update = function() {


    if (player.alive && 
		(player.y > 400 || player.y < -300)) {
        gameOver();
    }

    game.input.onDown.add(function() {
		player.body.velocity.y = -200;
    });
};


var gameOver = function() {
	player.kill();
	game.add.text(100,100,'Game Over', {
		font: '30px Arial Black',
		color: 'red'
	});
};

// create an instance of phaser
var game = new Phaser.Game(w, h, Phaser.AUTO, '', {
	preload: preload,
	create: create,
	update: update
});

})();

</script>
	
</body>
</html>
